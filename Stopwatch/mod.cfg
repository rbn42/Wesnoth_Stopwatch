[modification]
    id=stopwatch
    name=_"Stopwatch"
    description=_"Who is the slowest player?"
    require_modification=no
    [event]
        name=side turn
        first_time_only=yes
        [lua]
            code = <<
                        wesnoth.set_variable("Stopwatch_time", os.time())
                        >>
        [/lua]
    [/event]
    [event]
        name=side turn end
        first_time_only=no
        [lua]
            code = <<
                        local t1 = os.time() - wesnoth.get_variable("Stopwatch_time")
                        local k2 = "Stopwatch_side" .. wesnoth.current.side
                        local t2 = wesnoth.get_variable(k2)
                        if t2 == nil then t2 = 0 end
                        t2 = t1 + t2
                        wesnoth.set_variable("Stopwatch_time", os.time())
                        wesnoth.set_variable(k2, t2)
                        local name = wesnoth.sides[wesnoth.current.side].name
                        wesnoth.message(name, "finished turn in " .. t1 .. "s (" .. t2 .. "s overall).")
			>>
        [/lua]
    [/event]
[/modification]
